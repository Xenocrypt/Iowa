<!DOCTYPE html>
<meta charset="utf-8">
<style>
* {
font-family:'Open Sans', sans-serif;
}

.One {
	display: inline-block;
	position: relative;
	width: 100%;
	padding-bottom: 30%; 
	vertical-align: middle; 
	overflow: hidden; 

}

ul {
list-style: square;
margin:10px;
}


svg { 
	display: inline-block;
	position: absolute;
	top: 0;
	left: 0;
}



div.img {
display:block;
margin-left:auto;
margin-right:auto;
vertical-align:middle;
width:100%;}

img {
display:block;
margin-left:auto;
margin-right:auto;
vertical-align:middle;
width:100%;}

h2, h3 {
margin-left:auto;
text-align:center;
margin-right:auto;
}
li{
padding:10px;}

p{
width:100%;
text-align:left;
margin-left: auto;
margin-right:auto;
font-size:20px;
}

div.chart{
width:80%;
display:block;
margin-left: auto;
margin-right:auto;
font-size:15px;
}

div.table{
padding:10px;
display:block;
margin-left: auto;
margin-right:auto;
font-size:15px;
}

div.form{
padding: 10px;}


div.text{
width:60%;
text-align:left;
margin-left: auto;
margin-right:auto;
font-size:20px;
}

div.box{
font-size:20px;

}

table.main {
  border-spacing: 10px 0;
}


</style>
<body>
<div>
<h2>Prison Admissions And Arrests (Thousands) In CA, CO, MI, NJ, ND, SC, WA, WI (Neal/Rick States), 1985-2000</h2>
<div class="text">
<h3>Introduction: Why Incarceration Rates?</h3>
<p>If you have been following any of the discussions of U.S. criminal justice reform then you have probably seen some version of <a href="http://www.vox.com/2015/7/13/8913297/mass-incarceration-maps-charts">this chart</a> of American incarceration rates over time:</p>
<div class="img">
<img src="Chart.png"></img>
</div>
<p>Or maybe <a href="https://commons.wikimedia.org/wiki/File:U.S._incarceration_rates_1925_onwards.png">this one</a>:</p>
<div class="img">
<img src="Chart2.png" style="width:100%"></img>
</div>
<p>These are certainly dramatic statistics, but to me (after spending sometime reading about these things) they bring to mind a simple question: Why do we look at incarceration rates at all?</p>
<p>A country's incarceration rate is the percentage of its population currently serving a prison term; technically something like the sum over X of people admitted to terms of length X at most X days ago, divided by the population. An incarceration rate calculated today would aggregate together today's small drug offenders and drunk drivers along with convicted murderers from a decade ago, as long as they were all still in prison right now.</p>
<p>But there is no stock of incarcerated people. The people incarcerated today won't all be incarcerated tomorrow, and quite a few of them won't be incarcerated in a year or two. People move in and out of prisons, and convicted felons face a lifetime of consequences even when released.</p>
<p>We would presumably rather study the lifetime risk of incarceration than the incarceration rate--the population incarcerated at least once in their lives, not the population incarcerated at any given time. Unfortunately the latter is the dramatic statistics we have (perhaps in part because current prisoners are relatively easy to count, being in prison) and there have been many impressive statistical projects trying to explain the effects of this or that factor on incarceration rates as if they were the most relevant and meaningful number instead of the most available one.
</p>
<p>One of these statistical projects is a 2013 paper by Neal and Rick, <a href="http://home.uchicago.edu/~arick/prs_boom_201309.pdf">here</a>. They combined arrest data from the Uniform Crime Reports program (UCR) along with offender-level data on admissions and terms from the National Corrections Reporting Program (NCRP) for a subset of states they considered internally and externally reliably: California, Colorado, Michigan, New Jersey, North Dakota, South Carolina, Washington, and Wisconsin. Aggregating offenses into fourteen categories, Neal and Rick looked at the percentage of people arrested for an offense who ended up serving terms of different lengths before release or parole as a proxy for sentencing harshness. Following tradition, they constructed a model to measure the effects of these sentencing changes on the incarceration rate.</p>
<p>I thought their data was interesting in its own right, and wanted to present it in a straightforward way: to show the effects on prison admissions over time, rather than to try to determine the effects on the incarceration rate. Cumulative prison admissions aren't the same thing as lifetime risk of incarceration, since people can go to prison more than once, but it's closer.</p>
<h3>Prison Arrests And Admissions, 1985-2015: Total And By Year.</h3>
<p>The below chart has arrests and admissions for the checked offenses in the Neal/Rick 
states, cumulatively (in the table) and over time (in the stacked area chart). You can check or uncheck offenses to look at subsets.</p>
<p>Many scholars like John Pfaff use two separate criminal policy measures: the percentage of people who are admitted to prison having been arrested and the distribution of eventual time served among people admitted to prison. For some reason Neal and Rick take issue with this and combine them into one set of measures: the percentage of people who serve for a particular amount of time having been arrested. I do not really understand this (as far as I can tell it is basically the same thing: P(Serving for X Years | Arrest) = P(Serving for X Years | Admission to Prison) * P(Admission to Prison | Arrest)).</p>
<p>To hopefully satisfy everyone involved, I've provided three different totals in the table along with "reality": "If Time Served Per Admission Constant", showing the cumulative results if the percentage of people admitted to prison each year served the same distribution of terms as in 1985; "If Admissions Per Arrest Constant", showing the results if the percentage of people arrested who were admitted to prison stayed the same as in 1985; and "If Both Constant", fixing both admissions per arrest and time served per admission.</p>
<p>All figures are in thousands of instances, as of now.</p>
</div>
<div class="chart">
<div class="form">
<form id="theform">
</form>
</div>
<div class="table">
<table class="main">
<tr>
<th>Situation</th><th>Arrests</th><th>Admissions</th><th>0-2 Years</th><th>2-5 Years</th><th>5-10 Years</th><th>10+ Years</th>
</tr> 
</table>
</div>
</div>
<div class="One">
<svg viewBox="0 0 1200 500" preserveAspectRatio="xMinYMin meet">
</svg>
</div>
</div>
<div class="text">
<p>First of all, there have been a lot of arrests: 58 million or so over the 15 years. Of course that doesn't mean that 58 million distinct people were arrested, far from it.  Despite the large number of arrests and the trend towards "mass incarceration", there does not seem to have been any boom in arrests and in fact there may have even been a  decline in arrests per capita. As (find Pfaff's quote) says, "it is easy to dismiss the idea that mass incarceration is driven by arrests". </p>
<p>Second, there were a lot more arrests than prison admissions. As you can see, you almost literally can't graph them on the same scale. In absolute terms, for nearly every offense, only a pretty small percentage of arrests seem to result in a new prison term, and this was true throughout the period. The number of new prison terms for aggravated assault was usually about 3% or 4% of the number of arrests for aggravated assault, for example.</p>
<p>Despite this, because the numbers are so large, and because increases accumulate over time, even relatively marginal changes in the percentage of arrested offenders who were apparently sentenced to prison terms can have consequences that are anything but marginal.
</p>
<h3>Breaking Down The "Extra" Admissions</h3>
<p>These eight states recorded about 1.2 million new prison admissions from 1985 to 2000. There would have been about 780,000 if admissions per arrest were at constant at 1985 levels for each offense, which means that there were something like 440,000 "extra" prison admissions. Of course that doesn't mean that 440,000 distinct "extra" people went to prison: that would only follow if everyone went to prison at most once, which we know is false. Still, it is something like a start.</p>
<p>I would break those 440,000 "extra" prison admissions down as follows (consider all totals approximate):</p>
<ul>
<li>The extent to which the "War On Drugs" "explains" "mass incarceration" is a heavily contested topic, as are the definitions of any of those things, I imagine. Based on the Neal/Rick paper, there have been 215,000 "extra admissions" from drug offenses (about half of the total number of "extra admissions") with 133,000 from "drug trafficking" and 82,000 from "drug possession/use". Does that mean that about half of "mass incarceration" is "explained" by the "War On Drugs"? Maybe. It's probably an over-estimate: some of those admissions were pre-textual or plea bargains. It doesn't necessarily explain about half of the increased lifetime risk of incarceration (since some of the people who were admitted to "extra" drug terms had been incarcerated before, or would have been admitted for something else even without the increased focus on drugs). Even if drug offenses explain about half of the increase in admissions, they probably explain less of the increase in the incarceration rate, since the sentences are shorter.
</li>
<li>By the same criteria, there have been 80,000 "extra admissions" from "other crimes", about one-fifth or one-sixth of the total. Since this one category includes about half of all arrests, it presumably covers misdemeanors along with a grab bag of miscellanious felonies. That probably means that looking at a single admissions to arrests ratio over time is even more suspect for "other crimes" than it is for the other categories. Still, there was a large increase in "other crimes" admissions over time, and it has to explained somehow. My guess is that a lot of them are from traffic/DUI offenses, weapons charges, or law enforcement process stuff (escape, resisting arrest, failure to appear). Between these two bullet points, perhaps two-thirds of "extra admissions" were for drug offenses or miscellanious crimes, leaving only about a third for more conventional property or violent crimes. 
</li>
<li>There were 94,000 "extra admissions" from property crimes. Most of these were from the "Burglary" and "Larceny/Theft" categories (36,000 and 32,000 respectively), along with "Motor Vehicle Theft" (17,000), "White Collar Crime" (8,000) and "Other Property" (2,000). Once again, this is because arrests for property crimes more or less declined from 1989 to 2000 even without adjusting for population growth, while prison admissions for property crimes grew slightly. In absolute terms the changes were small (for these property offenses new prison admissions as a share of arrests went from around 2% to around 3.5%) but had a larger impact over time. 
</li>
<li>There were 36,000 extra admissions" from violent crimes, nearly half of them classified as "Robbery" (17,000), along with "Murder" (9,000) and "Other Assault" (9,000). There were only minimal "extra admissions" from "Agg. Assault" or "Forcible Rape". 
</li>
<li>Finally, there were 17,000 (about 1/26th) "extra admissions" from "other sex crimes".
</li>
</ul>
</div>
</div>
</body>
<script src="d3.v3.js"></script>
<script src="NealRick.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Open Sans', 'Open Sans italic']
    }
  });
</script>
<script>
ChartHeight=300;
Boxwidth=450;
Boxheight=150;
xscale = d3.scale.linear().domain([0, 15]).range([0, 500]);
yscale = d3.scale.linear().domain([0, 4000]).range([ChartHeight, 0]);
List = d3.map(NealRick).keys()
Colors=d3.scale.linear().domain([0, 5]).range(["white", "blue"])
d3.selectAll("th").style("color", function(d, k){if((k>2)){return Colors(k-1)}else{return "black"}});
function SVGMaker(TheList)
{SVGThing = [];
for(i=0;i<16;i++){
Additions =  {'Arrests': 0, 'Admits': [0, 0, 0, 0]};
A = ['Larceny/Theft', 'Burglary', 'Motor Vehicle Theft', 'Other Sex Crime', 'White Collar Crime', 'Other Property'];
B = ['Drug Trafficking', 'Drug Possession/Use'];
C= ['Murder', 'Other Assault', 'Forcible Rape', 'Agg. Assault', 'Robbery'];
D = ['Other Crime'];
TheList.forEach(function(Crime){
Additions['Arrests']+=NealRick[Crime]['Arrests'][i];
Additions['Admits'][0]+=NealRick[Crime]['Admits'][i]
Additions['Admits'][1]+=NealRick[Crime]['Admits'][i]*NealRick[Crime]['TimeServed'][i][0];
Additions['Admits'][2]+=NealRick[Crime]['Admits'][i]*NealRick[Crime]['TimeServed'][i][1];
Additions['Admits'][3]+=NealRick[Crime]['Admits'][i]*NealRick[Crime]['TimeServed'][i][2];
});
SVGThing.push(Additions)}
return SVGThing}
NewMax = 130;
div = d3.select("div.One");
svg = d3.select("svg");
yscale2 = d3.scale.linear().domain([0, NewMax]).range([ChartHeight, 0]);

svg.append("rect").attr("width", 500).attr("height", ChartHeight).attr("x", "600px").attr("fill", "none").attr("stroke-width", "5px").attr("stroke", "black");
svg.append("rect").attr("width", 500).attr("height", ChartHeight-yscale(NewMax)).attr("y",yscale(NewMax)).attr("fill", "none").attr("stroke-width", "5px").attr("stroke", "black").attr("x", "2.5px");

svg.append("line").attr("x1", "500px").attr("x2", "600px").attr("y1", (yscale(NewMax))+"px").attr("y2", 0+"px").attr("stroke-width", "3px").attr("stroke", "black")
svg.append("line").attr("x1", "500px").attr("x2", "600px").attr("y1", ChartHeight+"px").attr("y2", ChartHeight+"px").attr("stroke-width", "3px").attr("stroke", "black")

svg.append("path").attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)+600}).y1(function(d) { return yscale2(d['Admits'][0])}).y0(function(d){return yscale2(0)})(SVGMaker(List))).attr("fill", d3.rgb("lightgrey").brighter(0.3)).attr("stroke-width", "0px").attr("stroke", "black");
svg.append("path").attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)}).y1(function(d) { return yscale(d['Admits'][0])}).y0(function(d){return yscale(0)})(SVGMaker(List))).attr("fill", d3.rgb("lightgrey").brighter(0.3)).attr("stroke-width", "0px").attr("stroke", "black");
for(L=0;L<7;L++){
svg.append("line").attr({"x1":0, "x2":500, "y1":yscale((4000/6)*L)+"px", "y2":yscale((4000/6)*L)+"px", "stroke-width":"0.5px", "stroke":d3.rgb("black").brighter(0.3)});
svg.append("line").attr({"x1":600, "x2":1100, "y1":yscale2((NewMax/6)*L)+"px", "y2":yscale2((NewMax/6)*L)+"px", "stroke-width":"0.5px", "stroke":d3.rgb("black").brighter(0.3)});
}
svg.selectAll("path.Admits").data([[0,0], [0,1], [0, 2], [0, 3], [1, 0], [1, 1], [1, 2], [1, 3]]).enter().append("path").attr("class", "Admits").attr("fill", function(d){return Colors(4-d[1])}).attr("stroke-width", "3px");
svg.append("path").attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)}).y(function(d){return yscale(d['Arrests'])})(SVGMaker(List))).attr("stroke-width", "3px").attr("fill", "none").attr("stroke", "lightgrey");




svg.append("path").attr("stroke", "black").attr("stroke-width", "3px").attr("id", "Arrests1");
svg.append("path").attr("stroke", "black").attr("stroke-width", "3px").attr("id", "Arrests2");



Years = []
for(i=0;i<16;i++){
Years.push(i)};

svg.selectAll("circle.Info").data(Years).enter().append("circle").attr("class", "Info").attr("r", "3px").attr("cx", function(d){return xscale(d)+600}).attr("fill", "black");
svg.append("path").attr("stroke", "black").attr("stroke-width", "1px").attr("id", "AdmitsLine");


function Thing(A, b){
if(b==0){
return 0}
else{
return A[4-b]
}
}



function Pathmaker(Tuple, TheList){

return d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)+Tuple[0]*600}).y0(function(d){if(Tuple[0]==0){return yscale(Thing(d['Admits'], Tuple[1]+1))}else{return yscale2(Thing(d['Admits'], Tuple[1]+1))}}).y1(function(d){if(Tuple[0]==0){return yscale(Thing(d['Admits'], Tuple[1]))}else{return yscale2(Thing(d['Admits'], Tuple[1]))}})(SVGMaker(TheList))

}
function SVGUpdater(TheList){
d3.select("path#Arrests1").transition().duration(2500).attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)}).y(function(d){return yscale(d['Arrests'])})(SVGMaker(TheList)));
d3.select("path#Arrests2").transition().duration(2500).attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)+600}).y(function(d){return yscale2(d['Arrests'])})(SVGMaker(TheList)));
d3.selectAll("path.Admits").transition().duration(2500).attr("d", function(d){return Pathmaker(d, TheList)});
d3.selectAll("circle.Info").transition().duration(2500).attr("cy", function(d){return yscale2(SVGMaker(TheList)[d]['Admits'][0])+"px"})
d3.select("path#AdmitsLine").transition().duration(2500).attr("d", d3.svg.area().interpolate("cardinal").x(function(d, i){return xscale(i)+600}).y(function(d){return yscale2(d['Admits'][0])})(SVGMaker(TheList)));

}

SVGUpdater(List);

Lengths = ["0-2", "2-5", "5-10", "10+"]

d3.selectAll("circle.Info").on("mouseover", function(){
Index =this.__data__
Coords = d3.mouse(d3.select("body")[0][0]);
Xcoord = Coords[0];
Ycoord = Coords[1];
Results = SVGMaker(List)[Index];
Box =d3.select("body").append("div").style("width",Boxwidth+"px").style("height", Boxheight+"px").style("border-color", "black").style("border-width", "3px").style("border-style", "solid").style("background-color", "white").style("z-index", 10).style("position", "absolute").style("left", Xcoord+"px").style("top", (Ycoord-Boxheight)+"px").attr("class", "box");
Table2 = Box.append("table").attr("width", "100%");
Header = '<th>Year</th><th>Arrests</th><th>Admissions</th><th>0-2 Years</th><th>2-5 Years</th><th>5-10 Years</th><th>10+ Years</th>'
Table2.append("tr").html(Header);
String = '<td>'+(1985+Index)+'</td><td>'+Math.round(Results['Arrests']).toLocaleString()+'</td><td>'+(Math.round(Results['Admits'][0]*10)/10).toLocaleString()+' ('+Math.round(Math.round((Results['Admits'][0]/Results['Arrests'])*1000))/10+'% Of Arrests)</td>'
for(j=0;j<3;j++){
String+='<td>'+(Math.round(10*Results['Admits'][j]-10*Results['Admits'][j+1])/10).toLocaleString()+'</td>'
}
String+='<td>'+(Math.round(10*Results['Admits'][3])/10).toLocaleString()+'</td>'
Table2.append("tr").html(String);
Table2.selectAll("th").style("color", function(d, L){return ((L>2)?Colors(L-1):"black")});
})

d3.selectAll("circle.Info").on("mouseout", function(){
d3.selectAll("div.box").remove()});




X = d3.select("form").selectAll("label").data(d3.map(NealRick).keys()).enter().append("label").text(function(d){return d});
X.append("input").attr({"type": "checkbox"}).attr("value", function(d){return d}).attr("checked", true);
X.append("br");
NewTotals = [[0, 0,0,0,0,0], [0, 0,0,0,0,0],[0, 0,0,0,0,0],[0, 0,0,0,0,0]];
Reference = {};
NewTotals2 = [];
d3.map(NealRick).keys().forEach(function(Crime){
Reference[Crime] =  [[0, 0,0,0,0,0], [0, 0,0,0,0,0],[0, 0,0,0,0,0],[0, 0,0,0,0,0]];
for(i=0;i<16;i++){
Arrests = [NealRick[Crime]['Admits'][i], NealRick[Crime]['Admits'][i], (NealRick[Crime]['Admits'][0]/NealRick[Crime]['Arrests'][0])*NealRick[Crime]['Arrests'][i], (NealRick[Crime]['Admits'][0]/NealRick[Crime]['Arrests'][0])*NealRick[Crime]['Arrests'][i]]
TimeServed=[NealRick[Crime]['TimeServed'][i], NealRick[Crime]['TimeServed'][0], NealRick[Crime]['TimeServed'][i], NealRick[Crime]['TimeServed'][0]];
for(j=0;j<4;j++){
NewTotals[j][0]+=NealRick[Crime]['Arrests'][i];
NewTotals[j][1]+=Arrests[j];
NewTotals[j][2]+=(1-TimeServed[j][0])*Arrests[j];
NewTotals[j][3]+=(TimeServed[j][0]-TimeServed[j][1])*Arrests[j];
NewTotals[j][4]+=(TimeServed[j][1]-TimeServed[j][2])*Arrests[j];
NewTotals[j][5]+=(TimeServed[j][2])*Arrests[j];
Reference[Crime][j][0]+=NealRick[Crime]['Arrests'][i];
Reference[Crime][j][1]+=Arrests[j];
Reference[Crime][j][2]+=(1-TimeServed[j][0])*Arrests[j];
Reference[Crime][j][3]+=(TimeServed[j][0]-TimeServed[j][1])*Arrests[j];
Reference[Crime][j][4]+=(TimeServed[j][1]-TimeServed[j][2])*Arrests[j];
Reference[Crime][j][5]+=(TimeServed[j][2])*Arrests[j];
}
}})
for(k=0;k<5;k++){
NewTotals2[k]=[].concat(NewTotals[k])
}

function Table(List){
NewTotals3=[]
d3.selectAll("tr.row").remove()
Things = ['Reality', 'If Time Served Per Admission Constant', 'If Admissions Per Arrest Constant', 'If Both Constant']
for(j=0;j<4;j++)
{
String='<td>'+Things[j]+'</td>';
for(k=0;k<6;k++){
String+="<td>"+Math.round(NewTotals[j][k]).toLocaleString()+" / "+Math.round(NewTotals2[j][k]).toLocaleString()+" </td>"
}
NewTotals3.push(String)}

d3.select("table").selectAll("tr.row").data(NewTotals3).enter().append("tr").attr("class", "row").html(function(d){return d});
}

Table(NewTotals);

function Changer(Crime, ID){
Result = Reference[Crime];
for(j=0;j<4;j++){
for(k=0; k<6;k++){
NewTotals[j][k]+=(ID)*Result[j][k]
}
}
Table(NewTotals)
};


d3.selectAll("input").on("change", function(){
Crime = this.value;
console.log((Crime, -(List.indexOf(Crime) > -1)));
if(List.indexOf(Crime) > -1){
Changer(Crime, -1);
List.splice(List.indexOf(Crime), 1);
SVGUpdater(List);
}
else{
Changer(Crime, 1);
List.push(Crime)
SVGUpdater(List);
}});

</script>
